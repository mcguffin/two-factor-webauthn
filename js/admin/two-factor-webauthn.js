!function(){var e={};(function(t){"use strict";var n,a=(n="undefined"!=typeof window?window.jQuery:void 0!==t?t.jQuery:null)&&n.__esModule?n:{default:n};e={register:function(e,t){var n=e.action,r=e.payload,o=e._wpnonce;!function(e,t){var n=Object.assign({},e.publicKey);n.attestation=void 0,n.challenge=new Uint8Array(n.challenge),n.user.id=new Uint8Array(n.user.id),navigator.credentials.create({publicKey:n}).then(function(n){var a=JSON.parse(String.fromCharCode.apply(null,new Uint8Array(n.response.clientDataJSON)));if(e.b64challenge!==a.challenge&&t(!1,"key returned something unexpected (1)"),"https://"+e.publicKey.rp.name!=a.origin)return t(!1,"key returned something unexpected (2)");if(!("type"in a))return t(!1,"key returned something unexpected (3)");if("webauthn.create"!=a.type)return t(!1,"key returned something unexpected (4)");var r=[];new Uint8Array(n.response.attestationObject).forEach(function(e){r.push(e)});var o=[];new Uint8Array(n.rawId).forEach(function(e){o.push(e)});var i={rawId:o,id:n.id,type:n.type,response:{attestationObject:r,clientDataJSON:JSON.parse(String.fromCharCode.apply(null,new Uint8Array(n.response.clientDataJSON)))}};t(!0,JSON.stringify(i))}).catch(function(e){"name"in e&&("AbortError"==e.name||"NS_ERROR_ABORT"==e.name)||"NotAllowedError"==e.name?t(!1,"abort"):t(!1,e.toString())})}(r,function(e,r){a.default.ajax({url:wp.ajax.settings.url,method:"post",data:{action:n,payload:r,_wpnonce:o},success:t})})},login:function(e,t){e.action;var n,a,r,o,i=e.payload;e._wpnonce,a=function(e,n){t({success:e,result:n})},r=(n=i).challenge,(o=Object.assign({},n)).challenge=new Uint8Array(n.challenge),o.allowCredentials=o.allowCredentials.map(function(e){var t=Object.assign({},e);return t.id=new Uint8Array(e.id),t}),navigator.credentials.get({publicKey:o}).then(function(e){var t=[];new Uint8Array(e.rawId).forEach(function(e){t.push(e)});var n=JSON.parse(String.fromCharCode.apply(null,new Uint8Array(e.response.clientDataJSON))),o=[];new Uint8Array(e.response.clientDataJSON).forEach(function(e){o.push(e)});var i=[];new Uint8Array(e.response.authenticatorData).forEach(function(e){i.push(e)});var u=[];new Uint8Array(e.response.signature).forEach(function(e){u.push(e)});var l={type:e.type,originalChallenge:r,rawId:t,response:{authenticatorData:i,clientData:n,clientDataJSONarray:o,signature:u}};a(!0,JSON.stringify(l))}).catch(function(e){"name"in e?"NotAllowedError"==e.name?a(!1,"not-allowed"):"AbortError"==e.name||"NS_ERROR_ABORT"==e.name?a(!1,"abort"):a(!1,e.toString()):a(!1,e.toString())})},sendRequest:function(e,t){var n=e.action,r=e.payload,o=e._wpnonce;a.default.ajax({url:wp.ajax.settings.url,method:"post",data:{action:n,payload:r,_wpnonce:o},success:t})}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{}),function(t){"use strict";var n,a=(n="undefined"!=typeof window?window.jQuery:void 0!==t?t.jQuery:null)&&n.__esModule?n:{default:n},r=function(t,n){var r=n.action,o=n.payload,i=n._wpnonce,u=function(){var n=arguments.length>0&&void 0!==arguments[0]&&arguments[0],u=(0,a.default)(t).text();(0,a.default)(t).prop("contenteditable",!1),(0,a.default)(document).off("keydown"),(0,a.default)(t).off("blur"),n&&l!==u?((0,a.default)('<span class="spinner"></span>').insertAfter(t),(0,e.sendRequest)({action:r,payload:{md5id:o,label:u},_wpnonce:i},function(e){(0,a.default)(t).next(".spinner").remove()})):n||(0,a.default)(t).text(l)},l=(0,a.default)(t).text();(0,a.default)(t).prop("contenteditable",!0),(0,a.default)(document).on("keydown",function(e){13===e.which?(u(!0),e.preventDefault()):27===e.which&&u(!0)}),(0,a.default)(t).on("blur",function(e){return u(!0)}),(0,a.default)(t).focus(),document.execCommand("selectAll",!1,null)};(0,a.default)(document).on("click","#webauthn-register-key",function(t){t.preventDefault();var n=JSON.parse((0,a.default)(t.target).attr("data-create-options"));(0,e.register)(n,function(e){var t=(0,a.default)(e.html).appendTo("#webauthn-keys").find(".webauthn-label");r(t.get(0),JSON.parse(t.attr("data-action")))})}),(0,a.default)(document).on("click",".webauthn-action",function(t){t.preventDefault();var n=(0,a.default)(t.target).closest(".webauthn-action"),o=JSON.parse(n.attr("data-action")),i=(0,a.default)(t.target).closest(".webauthn-key"),u=o.action,l=(o.payload,o._wpnonce);"webauthn-test-key"===o.action?(t.preventDefault(),(0,e.login)(o,function(t){console.log(t),(0,e.sendRequest)({action:u,payload:t.result,_wpnonce:l},function(e){e.success?n.find("[data-tested]").attr("data-tested","tested"):n.find("[data-tested]").attr("data-tested","fail")})})):"webauthn-delete-key"===o.action&&(t.preventDefault(),(0,e.sendRequest)(o,function(e){e.success&&i.remove()})),"webauthn-edit-key"===o.action&&"true"!==(0,a.default)(t.currentTarget).prop("contenteditable")&&(t.preventDefault(),r(t.currentTarget,o))})}.call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2stZmxhdC9fcHJlbHVkZSIsInNyYy9qcy9saWIvZGF2aWRlYXJsLXdlYmF1dGhuLmpzIiwic3JjL2pzL2FkbWluL3R3by1mYWN0b3Itd2ViYXV0aG4vaW5kZXguanMiXSwibmFtZXMiOlsiXyRkYXZpZGVhcmxXZWJhdXRobl8yIiwib2JqIiwiX2pxdWVyeSIsIndpbmRvdyIsImpRdWVyeSIsImdsb2JhbCIsIl9fZXNNb2R1bGUiLCJkZWZhdWx0IiwicmVnaXN0ZXIiLCJvcHRzIiwiY2FsbGJhY2siLCJhY3Rpb24iLCJwYXlsb2FkIiwiX3dwbm9uY2UiLCJrZXkiLCJwdWJsaWNLZXkiLCJPYmplY3QiLCJhc3NpZ24iLCJhdHRlc3RhdGlvbiIsImNoYWxsZW5nZSIsIlVpbnQ4QXJyYXkiLCJ1c2VyIiwiaWQiLCJuYXZpZ2F0b3IiLCJjcmVkZW50aWFscyIsImNyZWF0ZSIsInRoZW4iLCJhTmV3Q3JlZGVudGlhbEluZm8iLCJjZCIsIkpTT04iLCJwYXJzZSIsIlN0cmluZyIsImZyb21DaGFyQ29kZSIsImFwcGx5IiwicmVzcG9uc2UiLCJjbGllbnREYXRhSlNPTiIsImI2NGNoYWxsZW5nZSIsInJwIiwibmFtZSIsIm9yaWdpbiIsInR5cGUiLCJhbyIsImF0dGVzdGF0aW9uT2JqZWN0IiwiZm9yRWFjaCIsInYiLCJwdXNoIiwicmF3SWQiLCJpbmZvIiwic3RyaW5naWZ5IiwiY2F0Y2giLCJhRXJyIiwidG9TdHJpbmciLCJzdWNjZXNzIiwiYWpheCIsInVybCIsIndwIiwic2V0dGluZ3MiLCJtZXRob2QiLCJkYXRhIiwibG9naW4iLCJwdWJLZXlBdXRoIiwiY2IiLCJvcmlnaW5hbENoYWxsZW5nZSIsInBrIiwicmVzdWx0IiwiYWxsb3dDcmVkZW50aWFscyIsIm1hcCIsImsiLCJyZXQiLCJnZXQiLCJhQXNzZXJ0aW9uIiwiaWRhIiwiY2RhIiwiYWQiLCJhdXRoZW50aWNhdG9yRGF0YSIsInNpZyIsInNpZ25hdHVyZSIsImNsaWVudERhdGEiLCJjbGllbnREYXRhSlNPTmFycmF5Iiwic2VuZFJlcXVlc3QiLCJlZGl0S2V5IiwiZWRpdExhYmVsIiwic3RvcEVkaXRpbmciLCJzYXZlIiwiYXJndW1lbnRzIiwibGVuZ3RoIiwibmV3TGFiZWwiLCJ0ZXh0IiwicHJvcCIsImRvY3VtZW50Iiwib2ZmIiwicHJldkxhYmVsIiwiaW5zZXJ0QWZ0ZXIiLCJtZDVpZCIsImxhYmVsIiwibmV4dCIsInJlbW92ZSIsIm9uIiwiZSIsIndoaWNoIiwicHJldmVudERlZmF1bHQiLCJmb2N1cyIsImV4ZWNDb21tYW5kIiwidGFyZ2V0IiwiYXR0ciIsIiRrZXlMYWJlbCIsImh0bWwiLCJhcHBlbmRUbyIsImZpbmQiLCIkYnRuIiwiY2xvc2VzdCIsIiRrZXlFbCIsImNvbnNvbGUiLCJsb2ciLCJjdXJyZW50VGFyZ2V0Il0sIm1hcHBpbmdzIjoiQ0FBQSxXQUNBLElBQUFBLEVBQUEsNkJDREEsSUFBQUMsRUFBQUMsR0FBQUQsRUFBQSxvQkFBQUUsT0FBQUEsT0FBQUMsWUFBQSxJQUFBQyxFQUFBQSxFQUFBRCxPQUFBLE9BQUFILEVBQUFLLFdBQUFMLEVBQUEsQ0FBQU0sUUFBQU4sR0FnTEFELEVBQWlCLENBQ2hCUSxTQWxEZ0IsU0FBRUMsRUFBTUMsR0FBYyxJQUU5QkMsRUFBOEJGLEVBQTlCRSxPQUFRQyxFQUFzQkgsRUFBdEJHLFFBQVNDLEVBQWFKLEVBQWJJLFVBbEUxQixTQUEwQkMsRUFBS0osR0FFOUIsSUFBSUssRUFBWUMsT0FBT0MsT0FBUSxHQUFJSCxFQUFJQyxXQUV2Q0EsRUFBVUcsaUJBQUEsRUFDVkgsRUFBVUksVUFBWSxJQUFJQyxXQUFZTCxFQUFVSSxXQUNoREosRUFBVU0sS0FBS0MsR0FBSyxJQUFJRixXQUFZTCxFQUFVTSxLQUFLQyxJQUduREMsVUFBVUMsWUFBWUMsT0FBUSxDQUFFVixVQUFBQSxJQUM5QlcsS0FBSyxTQUFVQyxHQUVmLElBQUlDLEVBQUtDLEtBQUtDLE1BQU1DLE9BQU9DLGFBQWFDLE1BQU0sS0FBTSxJQUFJ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RUFBVXBDLElBQUksR0FDZHhDLEtBQUtDLE1BQU8yRSxFQUFVRCxLQUFLLHNCQUFBLEVBTTlCdEcsRUFBQUssU0FBRWtGLFVBQVVRLEdBQUcsUUFBUSxtQkFBb0IsU0FBQUMsR0FDMUNBLEVBQUVFLGlCQUNGLElBQU1TLEdBQUEsRUFBTzNHLEVBQUFLLFNBQUUyRixFQUFFSyxRQUFRTyxRQUFRLG9CQUMzQnJHLEVBQU9vQixLQUFLQyxNQUFPK0UsRUFBS0wsS0FBSyxnQkFDN0JPLEdBQUEsRUFBUzdHLEVBQUFLLFNBQUUyRixFQUFFSyxRQUFRTyxRQUFRLGlCQUMzQm5HLEVBQThCRixFQUE5QkUsT0FBaUJFLEdBQWFKLEVBQXRCRyxRQUFzQkgsRUFBYkksVUFFSixzQkFBaEJKLEVBQUtFLFFBQ1R1RixFQUFFRSxrQkFBQSxFQUNGcEcsRUFBQTJELE9BQU9sRCxFQUFNLFNBQUF1RCxHQUVaZ0QsUUFBUUMsSUFBSWpELElBQUEsRUFDWmhFLEVBQUErRSxhQUFhLENBQUVwRSxPQUFBQSxFQUFRQyxRQUFTb0QsRUFBT0EsT0FBUW5ELFNBQUFBLEdBQVksU0FBQXFCLEdBQ3JEQSxFQUFTa0IsUUFDYnlELEVBQUtELEtBQUssaUJBQWlCSixLQUFLLGNBQWMsVUFFOUNLLEVBQUtELEtBQUssaUJBQWlCSixLQUFLLGNBQWMsYUFJdEIsd0JBQWhCL0YsRUFBS0UsU0FDaEJ1RixFQUFFRSxrQkFBQSxFQUNGcEcsRUFBQStFLGFBQWF0RSxFQUFNLFNBQVV5QixHQUV2QkEsRUFBU2tCLFNBRWIyRCxFQUFPZixZQUdhLHNCQUFoQnZGLEVBQUtFLFFBQ04sVUFBQSxFQUFXVCxFQUFBSyxTQUFFMkYsRUFBRWdCLGVBQWUxQixLQUFNLHFCQUN4Q1UsRUFBRUUsaUJBQ0ZwQixFQUFTa0IsRUFBRWdCLGNBQWV6Ryx1SEY5RzdCIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uKCl7XG4iLCJpbXBvcnQgJCBmcm9tICdqcXVlcnknXG5cbi8qKlxuICpcdFN0b2xlbiBmcm9tIGh0dHBzOi8vZ2l0aHViLmNvbS9kYXZpZGVhcmwvd2ViYXV0aG5cbiAqL1xuZnVuY3Rpb24gd2ViYXV0aG5BdXRoZW50aWNhdGUoIHB1YktleUF1dGgsIGNiICkge1xuXG5cdGNvbnN0IG9yaWdpbmFsQ2hhbGxlbmdlID0gcHViS2V5QXV0aC5jaGFsbGVuZ2U7XG5cdGNvbnN0IHBrID0gT2JqZWN0LmFzc2lnbigge30sIHB1YktleUF1dGggKVxuXG5cdHBrLmNoYWxsZW5nZSA9IG5ldyBVaW50OEFycmF5KCBwdWJLZXlBdXRoLmNoYWxsZW5nZSApXG5cdHBrLmFsbG93Q3JlZGVudGlhbHMgPSBway5hbGxvd0NyZWRlbnRpYWxzLm1hcCggayA9PiB7XG5cdFx0bGV0IHJldCA9IE9iamVjdC5hc3NpZ24oIHt9LCBrIClcblx0XHRyZXQuaWQgPSBuZXcgVWludDhBcnJheShrLmlkKTtcblx0XHRyZXR1cm4gcmV0XG5cdH0gKVxuXG5cdC8qIGFzayB0aGUgYnJvd3NlciB0byBwcm9tcHQgdGhlIHVzZXIgKi9cblx0bmF2aWdhdG9yLmNyZWRlbnRpYWxzLmdldCggeyBwdWJsaWNLZXk6IHBrIH0gKVxuXHRcdC50aGVuKCBhQXNzZXJ0aW9uID0+IHtcblx0XHRcdC8vIGNvbnNvbGUubG9nKFwiQ3JlZGVudGlhbHMuR2V0IHJlc3BvbnNlOiBcIiwgYUFzc2VydGlvbik7XG5cdFx0XHR2YXIgaWRhID0gW107XG5cdFx0XHQobmV3IFVpbnQ4QXJyYXkoYUFzc2VydGlvbi5yYXdJZCkpLmZvckVhY2goZnVuY3Rpb24odil7IGlkYS5wdXNoKHYpOyB9KTtcblx0XHRcdHZhciBjZCA9IEpTT04ucGFyc2UoU3RyaW5nLmZyb21DaGFyQ29kZS5hcHBseShudWxsLFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdCAgbmV3IFVpbnQ4QXJyYXkoYUFzc2VydGlvbi5yZXNwb25zZS5jbGllbnREYXRhSlNPTikpKTtcblx0XHRcdHZhciBjZGEgPSBbXTtcblx0XHRcdChuZXcgVWludDhBcnJheShhQXNzZXJ0aW9uLnJlc3BvbnNlLmNsaWVudERhdGFKU09OKSkuZm9yRWFjaChmdW5jdGlvbih2KXsgY2RhLnB1c2godik7IH0pO1xuXHRcdFx0dmFyIGFkID0gW107XG5cdFx0XHQobmV3IFVpbnQ4QXJyYXkoYUFzc2VydGlvbi5yZXNwb25zZS5hdXRoZW50aWNhdG9yRGF0YSkpLmZvckVhY2goZnVuY3Rpb24odil7IGFkLnB1c2godik7IH0pO1xuXHRcdFx0dmFyIHNpZyA9IFtdO1xuXHRcdFx0KG5ldyBVaW50OEFycmF5KGFBc3NlcnRpb24ucmVzcG9uc2Uuc2lnbmF0dXJlKSkuZm9yRWFjaChmdW5jdGlvbih2KXsgc2lnLnB1c2godik7IH0pO1xuXHRcdFx0dmFyIGluZm8gPSB7XG5cdFx0XHRcdHR5cGU6IGFBc3NlcnRpb24udHlwZSxcblx0XHRcdFx0b3JpZ2luYWxDaGFsbGVuZ2U6IG9yaWdpbmFsQ2hhbGxlbmdlLFxuXHRcdFx0XHRyYXdJZDogaWRhLFxuXHRcdFx0XHRyZXNwb25zZToge1xuXHRcdFx0XHRcdGF1dGhlbnRpY2F0b3JEYXRhOiBhZCxcblx0XHRcdFx0XHRjbGllbnREYXRhOiBjZCxcblx0XHRcdFx0XHRjbGllbnREYXRhSlNPTmFycmF5OiBjZGEsXG5cdFx0XHRcdFx0c2lnbmF0dXJlOiBzaWdcblx0XHRcdFx0fVxuXHRcdFx0fTtcblx0XHRcdGNiKCB0cnVlLCBKU09OLnN0cmluZ2lmeSggaW5mbyApICk7XG5cdFx0fSlcblx0XHQuY2F0Y2goIGFFcnIgPT4ge1xuXHRcdFx0aWYgKCBcIm5hbWVcIiBpbiBhRXJyICkge1xuXHRcdFx0XHQvLyBjaGFuZ2U6IGRpc3RpZ3Vpc2ggYmV0d2VlbiBlcnJvcnNcblx0XHRcdFx0aWYgKCBhRXJyLm5hbWUgPT0gXCJOb3RBbGxvd2VkRXJyb3JcIiApIHtcblx0XHRcdFx0XHRjYiggZmFsc2UsICdub3QtYWxsb3dlZCcgKTtcblx0XHRcdFx0fSBlbHNlIGlmICggYUVyci5uYW1lID09IFwiQWJvcnRFcnJvclwiIHx8IGFFcnIubmFtZSA9PSBcIk5TX0VSUk9SX0FCT1JUXCIgKSB7XG5cdFx0XHRcdFx0Y2IoIGZhbHNlLCAnYWJvcnQnICk7XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0Y2IoIGZhbHNlLCBhRXJyLnRvU3RyaW5nKCkgKTtcblx0XHRcdFx0fVxuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0Y2IoZmFsc2UsIGFFcnIudG9TdHJpbmcoKSk7XG5cdFx0XHR9XG5cdFx0fSk7XG59XG5cbi8qKlxuICpcdFN0b2xlbiBmcm9tIGh0dHBzOi8vZ2l0aHViLmNvbS9kYXZpZGVhcmwvd2ViYXV0aG5cbiAqL1xuZnVuY3Rpb24gd2ViYXV0aG5SZWdpc3RlcihrZXksIGNhbGxiYWNrKXtcblxuXHRsZXQgcHVibGljS2V5ID0gT2JqZWN0LmFzc2lnbigge30sIGtleS5wdWJsaWNLZXkgKTtcblxuXHRwdWJsaWNLZXkuYXR0ZXN0YXRpb24gPSB1bmRlZmluZWQ7XG5cdHB1YmxpY0tleS5jaGFsbGVuZ2UgPSBuZXcgVWludDhBcnJheSggcHVibGljS2V5LmNoYWxsZW5nZSApOyAvLyBjb252ZXJ0IHR5cGUgZm9yIHVzZSBieSBrZXlcblx0cHVibGljS2V5LnVzZXIuaWQgPSBuZXcgVWludDhBcnJheSggcHVibGljS2V5LnVzZXIuaWQgKTtcblxuXHQvLyBjb25zb2xlLmxvZyhrZXkpO1xuXHRuYXZpZ2F0b3IuY3JlZGVudGlhbHMuY3JlYXRlKCB7IHB1YmxpY0tleSB9IClcblx0XHQudGhlbihmdW5jdGlvbiAoYU5ld0NyZWRlbnRpYWxJbmZvKSB7XG5cdFx0XHQvLyBjb25zb2xlLmxvZyhcIkNyZWRlbnRpYWxzLkNyZWF0ZSByZXNwb25zZTogXCIsIGFOZXdDcmVkZW50aWFsSW5mbyk7XG5cdFx0XHR2YXIgY2QgPSBKU09OLnBhcnNlKFN0cmluZy5mcm9tQ2hhckNvZGUuYXBwbHkobnVsbCwgbmV3IFVpbnQ4QXJyYXkoYU5ld0NyZWRlbnRpYWxJbmZvLnJlc3BvbnNlLmNsaWVudERhdGFKU09OKSkpO1xuXHRcdFx0aWYgKCBrZXkuYjY0Y2hhbGxlbmdlICE9PSBjZC5jaGFsbGVuZ2UgKSB7XG5cdFx0XHRcdGNhbGxiYWNrKGZhbHNlLCAna2V5IHJldHVybmVkIHNvbWV0aGluZyB1bmV4cGVjdGVkICgxKScpO1xuXHRcdFx0fVxuXHRcdFx0aWYgKCdodHRwczovLycra2V5LnB1YmxpY0tleS5ycC5uYW1lICE9IGNkLm9yaWdpbikge1xuXHRcdFx0XHRyZXR1cm4gY2FsbGJhY2soZmFsc2UsICdrZXkgcmV0dXJuZWQgc29tZXRoaW5nIHVuZXhwZWN0ZWQgKDIpJyk7XG5cdFx0XHR9XG5cdFx0XHRpZiAoISAoJ3R5cGUnIGluIGNkKSkge1xuXHRcdFx0XHRyZXR1cm4gY2FsbGJhY2soZmFsc2UsICdrZXkgcmV0dXJuZWQgc29tZXRoaW5nIHVuZXhwZWN0ZWQgKDMpJyk7XG5cdFx0XHR9XG5cdFx0XHRpZiAoY2QudHlwZSAhPSAnd2ViYXV0aG4uY3JlYXRlJykge1xuXHRcdFx0XHRyZXR1cm4gY2FsbGJhY2soZmFsc2UsICdrZXkgcmV0dXJuZWQgc29tZXRoaW5nIHVuZXhwZWN0ZWQgKDQpJyk7XG5cdFx0XHR9XG5cblx0XHRcdHZhciBhbyA9IFtdO1xuXHRcdFx0KG5ldyBVaW50OEFycmF5KGFOZXdDcmVkZW50aWFsSW5mby5yZXNwb25zZS5hdHRlc3RhdGlvbk9iamVjdCkpLmZvckVhY2goZnVuY3Rpb24odil7XG5cdFx0XHRcdGFvLnB1c2godik7XG5cdFx0XHR9KTtcblx0XHRcdHZhciByYXdJZCA9IFtdO1xuXHRcdFx0KG5ldyBVaW50OEFycmF5KGFOZXdDcmVkZW50aWFsSW5mby5yYXdJZCkpLmZvckVhY2goZnVuY3Rpb24odil7XG5cdFx0XHRcdHJhd0lkLnB1c2godik7XG5cdFx0XHR9KTtcblx0XHRcdHZhciBpbmZvID0ge1xuXHRcdFx0XHRyYXdJZDogcmF3SWQsXG5cdFx0XHRcdGlkOiBhTmV3Q3JlZGVudGlhbEluZm8uaWQsXG5cdFx0XHRcdHR5cGU6IGFOZXdDcmVkZW50aWFsSW5mby50eXBlLFxuXHRcdFx0XHRyZXNwb25zZToge1xuXHRcdFx0XHRcdGF0dGVzdGF0aW9uT2JqZWN0OiBhbyxcblx0XHRcdFx0XHRjbGllbnREYXRhSlNPTjpcblx0XHRcdFx0XHQgIEpTT04ucGFyc2UoU3RyaW5nLmZyb21DaGFyQ29kZS5hcHBseShudWxsLCBuZXcgVWludDhBcnJheShhTmV3Q3JlZGVudGlhbEluZm8ucmVzcG9uc2UuY2xpZW50RGF0YUpTT04pKSlcblx0XHRcdFx0fVxuXHRcdFx0fTtcblx0XHRcdGNhbGxiYWNrKHRydWUsIEpTT04uc3RyaW5naWZ5KGluZm8pKTtcblx0XHR9KVxuXHRcdC5jYXRjaChmdW5jdGlvbiAoYUVycikge1xuXHRcdFx0aWYgKFxuXHRcdFx0XHQoXCJuYW1lXCIgaW4gYUVycikgJiYgKGFFcnIubmFtZSA9PSBcIkFib3J0RXJyb3JcIiB8fCBhRXJyLm5hbWUgPT0gXCJOU19FUlJPUl9BQk9SVFwiKVxuXHRcdFx0XHR8fCBhRXJyLm5hbWUgPT0gJ05vdEFsbG93ZWRFcnJvcidcblx0XHRcdCkge1xuXHRcdFx0XHRjYWxsYmFjayhmYWxzZSwgJ2Fib3J0Jyk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRjYWxsYmFjayhmYWxzZSwgYUVyci50b1N0cmluZygpKTtcblx0XHRcdH1cblx0XHR9KTtcbn1cblxuLyoqXG4gKlx0QHBhcmFtIEFycmF5QnVmZmVyIGFycmF5QnVmXG4gKlx0QHJldHVybiBBcnJheVxuICovXG5jb25zdCBidWZmZXIyQXJyYXkgPSBhcnJheUJ1ZiA9PiBbIC4uLiAobmV3IFVpbnQ4QXJyYXkoIGFycmF5QnVmICkpIF07XG5cbmNvbnN0IHJlZ2lzdGVyID0gKCBvcHRzLCBjYWxsYmFjayApID0+IHtcblxuXHRjb25zdCB7IGFjdGlvbiwgcGF5bG9hZCwgX3dwbm9uY2UgfSA9IG9wdHM7XG5cblx0d2ViYXV0aG5SZWdpc3RlciggcGF5bG9hZCwgKHN1Y2Nlc3MsaW5mbykgPT4ge1xuXHRcdCQuYWpheCh7XG5cdFx0XHR1cmw6IHdwLmFqYXguc2V0dGluZ3MudXJsLFxuXHRcdFx0bWV0aG9kOiAncG9zdCcsXG5cdFx0XHRkYXRhOiB7XG5cdFx0XHRcdGFjdGlvbjogYWN0aW9uLFxuXHRcdFx0XHRwYXlsb2FkOiBpbmZvLFxuXHRcdFx0XHRfd3Bub25jZTogX3dwbm9uY2Vcblx0XHRcdH0sXG5cdFx0XHRzdWNjZXNzOiBjYWxsYmFja1xuXHRcdH0pXG5cdH0pXG59XG5cblxuY29uc3QgbG9naW4gPSAoIG9wdHMsIGNhbGxiYWNrICkgPT4ge1xuXG5cdGNvbnN0IHsgYWN0aW9uLCBwYXlsb2FkLCBfd3Bub25jZSB9ID0gb3B0cztcblxuXHR3ZWJhdXRobkF1dGhlbnRpY2F0ZSggcGF5bG9hZCwgKCBzdWNjZXNzLCBpbmZvICkgPT4ge1xuXHRcdGNhbGxiYWNrKCB7IHN1Y2Nlc3MsIHJlc3VsdDogaW5mbyB9IClcblx0fSlcbn1cblxuY29uc3Qgc2VuZFJlcXVlc3QgPSAoIG9wdHMsIGNhbGxiYWNrICkgPT4ge1xuXG5cdGNvbnN0IHsgYWN0aW9uLCBwYXlsb2FkLCBfd3Bub25jZSB9ID0gb3B0cztcblxuXHQkLmFqYXgoe1xuXHRcdHVybDogd3AuYWpheC5zZXR0aW5ncy51cmwsXG5cdFx0bWV0aG9kOiAncG9zdCcsXG5cdFx0ZGF0YToge1xuXHRcdFx0YWN0aW9uOiBhY3Rpb24sXG5cdFx0XHRwYXlsb2FkOiBwYXlsb2FkLFxuXHRcdFx0X3dwbm9uY2U6IF93cG5vbmNlXG5cdFx0fSxcblx0XHRzdWNjZXNzOmNhbGxiYWNrXG5cdH0pXG59XG5cblxuY29uc3QgZWRpdEtleSA9ICggb3B0cywgY2FsbGJhY2sgKSA9PiB7XG5cbn1cblxubW9kdWxlLmV4cG9ydHMgPSB7XG5cdHJlZ2lzdGVyLCBsb2dpbiwgc2VuZFJlcXVlc3Rcbn1cbiIsImltcG9ydCAkIGZyb20gJ2pxdWVyeSdcbmltcG9ydCB7IHJlZ2lzdGVyLCBsb2dpbiwgc2VuZFJlcXVlc3QgfSBmcm9tICdkYXZpZGVhcmwtd2ViYXV0aG4nXG5cblxuXG5jb25zdCBlZGl0S2V5ID0gKCBlZGl0TGFiZWwsIG9wdHMgKSA9PiB7XG5cblx0Y29uc3QgeyBhY3Rpb24sIHBheWxvYWQsIF93cG5vbmNlIH0gPSBvcHRzXG5cblxuXHQvLyBjb25zb2xlLmxvZygkZWRpdExhYmVsLnByb3AoICdjb250ZW50ZWRpdGFibGUnICkpO1xuXHRjb25zdCBzdG9wRWRpdGluZyA9ICggc2F2ZSA9IGZhbHNlICkgPT4ge1xuXHRcdGxldCBuZXdMYWJlbCA9ICQoZWRpdExhYmVsKS50ZXh0KClcblx0XHQkKGVkaXRMYWJlbCkucHJvcCggJ2NvbnRlbnRlZGl0YWJsZScsIGZhbHNlICk7XG5cdFx0JChkb2N1bWVudCkub2ZmKCAna2V5ZG93bicgKVxuXHRcdCQoZWRpdExhYmVsKS5vZmYoICdibHVyJyApXG5cdFx0aWYgKCBzYXZlICYmIHByZXZMYWJlbCAhPT0gbmV3TGFiZWwgKSB7XG5cblx0XHRcdCQoJzxzcGFuIGNsYXNzPVwic3Bpbm5lclwiPjwvc3Bhbj4nKS5pbnNlcnRBZnRlcihlZGl0TGFiZWwpXG5cblx0XHRcdHNlbmRSZXF1ZXN0KFxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0YWN0aW9uLFxuXHRcdFx0XHRcdHBheWxvYWQ6IHsgbWQ1aWQ6IHBheWxvYWQsIGxhYmVsOiBuZXdMYWJlbCB9LFxuXHRcdFx0XHRcdF93cG5vbmNlXG5cdFx0XHRcdH0sXG5cdFx0XHRcdHJlc3BvbnNlID0+IHtcblx0XHRcdFx0XHQkKGVkaXRMYWJlbCkubmV4dCgnLnNwaW5uZXInKS5yZW1vdmUoKVxuXHRcdFx0XHR9XG5cdFx0XHQpO1xuXHRcdH0gZWxzZSBpZiAoICEgc2F2ZSApIHtcblx0XHRcdCQoZWRpdExhYmVsKS50ZXh0KHByZXZMYWJlbClcblx0XHR9XG5cdH1cblxuXHRjb25zdCBwcmV2TGFiZWwgPSAkKGVkaXRMYWJlbCkudGV4dCgpXG5cblx0JChlZGl0TGFiZWwpLnByb3AoICdjb250ZW50ZWRpdGFibGUnLCB0cnVlICk7XG5cblx0JChkb2N1bWVudCkub24oICdrZXlkb3duJywgZSA9PiB7XG5cdFx0aWYgKCBlLndoaWNoID09PSAxMyApIHtcblx0XHRcdHN0b3BFZGl0aW5nKCB0cnVlIClcblx0XHRcdGUucHJldmVudERlZmF1bHQoKVxuXHRcdH0gZWxzZSBpZiAoIGUud2hpY2ggPT09IDI3ICkge1xuXHRcdFx0c3RvcEVkaXRpbmcoIHRydWUgKVxuXHRcdH1cblx0fSApXG5cblx0Ly8gZm9jdXMgYW5kIHNlbGVjdFxuXHQkKGVkaXRMYWJlbCkub24oICdibHVyJywgZSA9PiBzdG9wRWRpdGluZyggdHJ1ZSApIClcblxuXHQkKGVkaXRMYWJlbCkuZm9jdXMoKVxuXG5cdGRvY3VtZW50LmV4ZWNDb21tYW5kKCAnc2VsZWN0QWxsJywgZmFsc2UsIG51bGwgKTtcblxufVxuXG4kKGRvY3VtZW50KS5vbiggJ2NsaWNrJywgJyN3ZWJhdXRobi1yZWdpc3Rlci1rZXknLCBlID0+IHtcblxuXHRlLnByZXZlbnREZWZhdWx0KCk7XG5cblx0Y29uc3Qgb3B0cyA9IEpTT04ucGFyc2UoICQoZS50YXJnZXQpLmF0dHIoJ2RhdGEtY3JlYXRlLW9wdGlvbnMnKSApO1xuXG5cdHJlZ2lzdGVyKCBvcHRzLCByZXNwb25zZSA9PiB7XG5cblx0XHQvLyAyRE86IGVycm9yIGhhbmRsaW5nXG5cblx0XHRsZXQgJGtleUl0ZW0gPSAkKHJlc3BvbnNlLmh0bWwpLmFwcGVuZFRvKCcjd2ViYXV0aG4ta2V5cycpXG5cdFx0bGV0ICRrZXlMYWJlbCA9ICRrZXlJdGVtLmZpbmQoJy53ZWJhdXRobi1sYWJlbCcpXG5cblx0XHRlZGl0S2V5KFxuXHRcdFx0JGtleUxhYmVsLmdldCgwKSxcblx0XHRcdEpTT04ucGFyc2UoICRrZXlMYWJlbC5hdHRyKCdkYXRhLWFjdGlvbicpIClcblx0XHQpO1xuXHR9KTtcblxufSk7XG5cbiQoZG9jdW1lbnQpLm9uKCdjbGljaycsJy53ZWJhdXRobi1hY3Rpb24nLCBlID0+IHtcblx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xuXHRjb25zdCAkYnRuID0gJChlLnRhcmdldCkuY2xvc2VzdCgnLndlYmF1dGhuLWFjdGlvbicpO1xuXHRjb25zdCBvcHRzID0gSlNPTi5wYXJzZSggJGJ0bi5hdHRyKCdkYXRhLWFjdGlvbicpICk7XG5cdGNvbnN0ICRrZXlFbCA9ICQoZS50YXJnZXQpLmNsb3Nlc3QoJy53ZWJhdXRobi1rZXknKVxuXHRjb25zdCB7IGFjdGlvbiwgcGF5bG9hZCwgX3dwbm9uY2UgfSA9IG9wdHNcblxuXHRpZiAoIG9wdHMuYWN0aW9uID09PSAnd2ViYXV0aG4tdGVzdC1rZXknICkge1xuXHRcdGUucHJldmVudERlZmF1bHQoKTtcblx0XHRsb2dpbiggb3B0cywgcmVzdWx0ID0+IHtcblx0XHRcdC8vIHNlbmQgdGhhdCBjcmFwIHRvIHNlcnZlclxuXHRcdFx0Y29uc29sZS5sb2cocmVzdWx0KVxuXHRcdFx0c2VuZFJlcXVlc3QoIHsgYWN0aW9uLCBwYXlsb2FkOiByZXN1bHQucmVzdWx0LCBfd3Bub25jZSB9LCByZXNwb25zZSA9PiB7XG5cdFx0XHRcdGlmICggcmVzcG9uc2Uuc3VjY2VzcyApIHtcblx0XHRcdFx0XHQkYnRuLmZpbmQoJ1tkYXRhLXRlc3RlZF0nKS5hdHRyKCdkYXRhLXRlc3RlZCcsJ3Rlc3RlZCcpXG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0JGJ0bi5maW5kKCdbZGF0YS10ZXN0ZWRdJykuYXR0cignZGF0YS10ZXN0ZWQnLCdmYWlsJylcblx0XHRcdFx0fVxuXHRcdFx0fSlcblx0XHR9ICk7XG5cdH0gZWxzZSBpZiAoIG9wdHMuYWN0aW9uID09PSAnd2ViYXV0aG4tZGVsZXRlLWtleScgKSB7XG5cdFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xuXHRcdHNlbmRSZXF1ZXN0KCBvcHRzLCBmdW5jdGlvbiggcmVzcG9uc2UgKSB7XG5cdFx0XHQvLyByZW1vdmVcblx0XHRcdGlmICggcmVzcG9uc2Uuc3VjY2VzcyApIHtcblxuXHRcdFx0XHQka2V5RWwucmVtb3ZlKCk7XG5cdFx0XHR9XG5cdFx0fSApO1xuXHR9IGlmICggb3B0cy5hY3Rpb24gPT09ICd3ZWJhdXRobi1lZGl0LWtleScgKSB7XG5cdFx0aWYgKCAndHJ1ZScgIT09ICQoZS5jdXJyZW50VGFyZ2V0KS5wcm9wKCAnY29udGVudGVkaXRhYmxlJyApICkge1xuXHRcdFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xuXHRcdFx0ZWRpdEtleSggZS5jdXJyZW50VGFyZ2V0LCBvcHRzICk7XG5cdFx0fVxuXHR9XG59KTtcbiJdfQ==