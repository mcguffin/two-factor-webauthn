!function(){var e={};(function(n){"use strict";var t,a=(t="undefined"!=typeof window?window.jQuery:void 0!==n?n.jQuery:null)&&t.__esModule?t:{default:t};e={register:function(e,n){var t=e.action,r=e.payload,o=e._wpnonce;!function(e,n){var t=Object.assign({},e.publicKey);t.attestation=void 0,t.challenge=new Uint8Array(t.challenge),t.user.id=new Uint8Array(t.user.id),navigator.credentials.create({publicKey:t}).then(function(t){var a=JSON.parse(String.fromCharCode.apply(null,new Uint8Array(t.response.clientDataJSON)));if(e.b64challenge!==a.challenge&&n(!1,"key returned something unexpected (1)"),"https://"+e.publicKey.rp.name!=a.origin)return n(!1,"key returned something unexpected (2)");if(!("type"in a))return n(!1,"key returned something unexpected (3)");if("webauthn.create"!=a.type)return n(!1,"key returned something unexpected (4)");var r=[];new Uint8Array(t.response.attestationObject).forEach(function(e){r.push(e)});var o=[];new Uint8Array(t.rawId).forEach(function(e){o.push(e)});var i={rawId:o,id:t.id,type:t.type,response:{attestationObject:r,clientDataJSON:JSON.parse(String.fromCharCode.apply(null,new Uint8Array(t.response.clientDataJSON)))}};n(!0,JSON.stringify(i))}).catch(function(e){"name"in e&&("AbortError"==e.name||"NS_ERROR_ABORT"==e.name)||"NotAllowedError"==e.name?n(!1,"abort"):n(!1,e.toString())})}(r,function(e,r){a.default.ajax({url:wp.ajax.settings.url,method:"post",data:{action:t,payload:r,_wpnonce:o},success:n})})},login:function(e,n){e.action;var t,a,r,o,i=e.payload;e._wpnonce,a=function(e,t){n({success:e,result:t})},r=(t=i).challenge,(o=Object.assign({},t)).challenge=new Uint8Array(t.challenge),o.allowCredentials=o.allowCredentials.map(function(e){var n=Object.assign({},e);return n.id=new Uint8Array(e.id),n}),navigator.credentials.get({publicKey:o}).then(function(e){var n=[];new Uint8Array(e.rawId).forEach(function(e){n.push(e)});var t=JSON.parse(String.fromCharCode.apply(null,new Uint8Array(e.response.clientDataJSON))),o=[];new Uint8Array(e.response.clientDataJSON).forEach(function(e){o.push(e)});var i=[];new Uint8Array(e.response.authenticatorData).forEach(function(e){i.push(e)});var l=[];new Uint8Array(e.response.signature).forEach(function(e){l.push(e)});var u={type:e.type,originalChallenge:r,rawId:n,response:{authenticatorData:i,clientData:t,clientDataJSONarray:o,signature:l}};a(!0,JSON.stringify(u))}).catch(function(e){"name"in e?"NotAllowedError"==e.name?a(!1,"not-allowed"):"AbortError"==e.name||"NS_ERROR_ABORT"==e.name?a(!1,"abort"):a(!1,e.toString()):a(!1,e.toString())})},sendRequest:function(e,n){var t=e.action,r=e.payload,o=e._wpnonce;a.default.ajax({url:wp.ajax.settings.url,method:"post",data:{action:t,payload:r,_wpnonce:o},success:n})}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{}),function(n){"use strict";var t,a=(t="undefined"!=typeof window?window.jQuery:void 0!==n?n.jQuery:null)&&t.__esModule?t:{default:t},r=function(n,t){var r=t.action,o=t.payload,i=t._wpnonce,l=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],l=(0,a.default)(n).text();(0,a.default)(n).prop("contenteditable",!1),(0,a.default)(document).off("keydown"),(0,a.default)(n).off("blur"),t&&u!==l?((0,a.default)('<span class="spinner"></span>').insertAfter(n),(0,e.sendRequest)({action:r,payload:{md5id:o,label:l},_wpnonce:i},function(e){(0,a.default)(n).next(".spinner").remove()})):t||(0,a.default)(n).text(u)},u=(0,a.default)(n).text();(0,a.default)(n).prop("contenteditable",!0),(0,a.default)(document).on("keydown",function(e){13===e.which?(l(!0),e.preventDefault()):27===e.which&&l(!0)}),(0,a.default)(n).on("blur",function(e){return l(!0)}),(0,a.default)(n).focus(),document.execCommand("selectAll",!1,null)};(0,a.default)(document).on("click","#webauthn-register-key",function(n){n.preventDefault();var t=JSON.parse((0,a.default)(n.target).attr("data-create-options"));(0,e.register)(t,function(e){var n=(0,a.default)(e.html).appendTo("#webauthn-keys").find(".webauthn-label");r(n.get(0),JSON.parse(n.attr("data-action")))})}),(0,a.default)(document).on("click",".webauthn-action",function(n){var t=JSON.parse((0,a.default)(n.target).attr("data-action")),o=n.target,i=((0,a.default)(n.target).closest(".webauthn-key"),t.action),l=(t.payload,t._wpnonce);"webauthn-test-key"===t.action?(n.preventDefault(),(0,e.login)(t,function(n){console.log(n),(0,e.sendRequest)({action:i,payload:n.result,_wpnonce:l},function(e){console.log(e),(0,a.default)(o).append('<span class="dashicons dashicons-yes-alt"></span>')})})):"webauthn-delete-key"===t.action&&(n.preventDefault(),(0,e.sendRequest)(t,function(e){e.success&&(0,a.default)(o).closest(".webauthn-key").remove()})),"webauthn-edit-key"===t.action&&"true"!==(0,a.default)(n.currentTarget).prop("contenteditable")&&(n.preventDefault(),r(n.currentTarget,t))})}.call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2stZmxhdC9fcHJlbHVkZSIsInNyYy9qcy9saWIvZGF2aWRlYXJsLXdlYmF1dGhuLmpzIiwic3JjL2pzL2FkbWluL3R3by1mYWN0b3Itd2ViYXV0aG4vaW5kZXguanMiXSwibmFtZXMiOlsiXyRkYXZpZGVhcmxXZWJhdXRobl8yIiwib2JqIiwiX2pxdWVyeSIsIndpbmRvdyIsImpRdWVyeSIsImdsb2JhbCIsIl9fZXNNb2R1bGUiLCJkZWZhdWx0IiwicmVnaXN0ZXIiLCJvcHRzIiwiY2FsbGJhY2siLCJhY3Rpb24iLCJwYXlsb2FkIiwiX3dwbm9uY2UiLCJrZXkiLCJwdWJsaWNLZXkiLCJPYmplY3QiLCJhc3NpZ24iLCJhdHRlc3RhdGlvbiIsImNoYWxsZW5nZSIsIlVpbnQ4QXJyYXkiLCJ1c2VyIiwiaWQiLCJuYXZpZ2F0b3IiLCJjcmVkZW50aWFscyIsImNyZWF0ZSIsInRoZW4iLCJhTmV3Q3JlZGVudGlhbEluZm8iLCJjZCIsIkpTT04iLCJwYXJzZSIsIlN0cmluZyIsImZyb21DaGFyQ29kZSIsImFwcGx5IiwicmVzcG9uc2UiLCJjbGllbnREYXRhSlNPTiIsImI2NGNoYWxsZW5nZSIsInJwIiwibmFtZSIsIm9yaWdpbiIsInR5cGUiLCJhbyIsImF0dGVzdGF0aW9uT2JqZWN0IiwiZm9yRWFjaCIsInYiLCJwdXNoIiwicmF3SWQiLCJpbmZvIiwic3RyaW5naWZ5IiwiY2F0Y2giLCJhRXJyIiwidG9TdHJpbmciLCJzdWNjZXNzIiwiYWpheCIsInVybCIsIndwIiwic2V0dGluZ3MiLCJtZXRob2QiLCJkYXRhIiwibG9naW4iLCJwdWJLZXlBdXRoIiwiY2IiLCJvcmlnaW5hbENoYWxsZW5nZSIsInBrIiwicmVzdWx0IiwiYWxsb3dDcmVkZW50aWFscyIsIm1hcCIsImsiLCJyZXQiLCJnZXQiLCJhQXNzZXJ0aW9uIiwiaWRhIiwiY2RhIiwiYWQiLCJhdXRoZW50aWNhdG9yRGF0YSIsInNpZyIsInNpZ25hdHVyZSIsImNsaWVudERhdGEiLCJjbGllbnREYXRhSlNPTmFycmF5Iiwic2VuZFJlcXVlc3QiLCJlZGl0S2V5IiwiZWRpdExhYmVsIiwic3RvcEVkaXRpbmciLCJzYXZlIiwiYXJndW1lbnRzIiwibGVuZ3RoIiwibmV3TGFiZWwiLCJ0ZXh0IiwicHJvcCIsImRvY3VtZW50Iiwib2ZmIiwicHJldkxhYmVsIiwiaW5zZXJ0QWZ0ZXIiLCJtZDVpZCIsImxhYmVsIiwibmV4dCIsInJlbW92ZSIsIm9uIiwiZSIsIndoaWNoIiwicHJldmVudERlZmF1bHQiLCJmb2N1cyIsImV4ZWNDb21tYW5kIiwidGFyZ2V0IiwiYXR0ciIsIiRrZXlMYWJlbCIsImh0bWwiLCJhcHBlbmRUbyIsImZpbmQiLCJidG4iLCJjbG9zZXN0IiwiY29uc29sZSIsImxvZyIsImFwcGVuZCIsImN1cnJlbnRUYXJnZXQiXSwibWFwcGluZ3MiOiJDQUFBLFdBQ0EsSUFBQUEsRUFBQSw2QkNEQSxJQUFBQyxFQUFBQyxHQUFBRCxFQUFBLG9CQUFBRSxPQUFBQSxPQUFBQyxZQUFBLElBQUFDLEVBQUFBLEVBQUFELE9BQUEsT0FBQUgsRUFBQUssV0FBQUwsRUFBQSxDQUFBTSxRQUFBTixHQWdMQUQsRUFBaUIsQ0FDaEJRLFNBbERnQixTQUFFQyxFQUFNQyxHQUFjLElBRTlCQyxFQUE4QkYsRUFBOUJFLE9BQVFDLEVBQXNCSCxFQUF0QkcsUUFBU0MsRUFBYUosRUFBYkksVUFsRTFCLFNBQTBCQyxFQUFLSixHQUU5QixJQUFJSyxFQUFZQyxPQUFPQyxPQUFRLEdBQUlILEVBQUlDLFdBRXZDQSxFQUFVRyxpQkFBQSxFQUNWSCxFQUFVSSxVQUFZLElBQUlDLFdBQVlMLEVBQVVJLFdBQ2hESixFQUFVTSxLQUFLQyxHQUFLLElBQUlGLFdBQVlMLEVBQVVNLEtBQUtDLElBR25EQyxVQUFVQyxZQUFZQyxPQUFRLENBQUVWLFVBQUFBLElBQzlCVyxLQUFLLFNBQVVDLEdBRWYsSUFBSUMsRUFBS0MsS0FBS0MsTUFBTUMsT0FBT0MsYUFBYUMsTUFBTSxLQUFNLElBQUli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QUFVcEMsSUFBSSxHQUNkeEMsS0FBS0MsTUFBTzJFLEVBQVVELEtBQUssc0JBQUEsRUFNOUJ0RyxFQUFBSyxTQUFFa0YsVUFBVVEsR0FBRyxRQUFRLG1CQUFvQixTQUFBQyxHQUMxQyxJQUFNekYsRUFBT29CLEtBQUtDLE9BQUEsRUFBTzVCLEVBQUFLLFNBQUUyRixFQUFFSyxRQUFRQyxLQUFLLGdCQUNwQ0ssRUFBTVgsRUFBRUssT0FFTjVGLElBQUEsRUFET1QsRUFBQUssU0FBRTJGLEVBQUVLLFFBQVFPLFFBQVEsaUJBQ0dyRyxFQUE5QkUsUUFBaUJFLEdBQWFKLEVBQXRCRyxRQUFzQkgsRUFBYkksVUFFSixzQkFBaEJKLEVBQUtFLFFBQ1R1RixFQUFFRSxrQkFBQSxFQUNGcEcsRUFBQTJELE9BQU9sRCxFQUFNLFNBQUF1RCxHQUVaK0MsUUFBUUMsSUFBSWhELElBQUEsRUFDWmhFLEVBQUErRSxhQUFhLENBQUVwRSxPQUFBQSxFQUFRQyxRQUFTb0QsRUFBT0EsT0FBUW5ELFNBQUFBLEdBQVksU0FBQXFCLEdBQzFENkUsUUFBUUMsSUFBSzlFLElBQUEsRUFDYmhDLEVBQUFLLFNBQUVzRyxHQUFLSSxPQUFPLDBEQUdXLHdCQUFoQnhHLEVBQUtFLFNBQ2hCdUYsRUFBRUUsa0JBQUEsRUFDRnBHLEVBQUErRSxhQUFhdEUsRUFBTSxTQUFVeUIsR0FFdkJBLEVBQVNrQixVQUFBLEVBRWJsRCxFQUFBSyxTQUFFc0csR0FBS0MsUUFBUSxpQkFBaUJkLFlBR1osc0JBQWhCdkYsRUFBS0UsUUFDTixVQUFBLEVBQVdULEVBQUFLLFNBQUUyRixFQUFFZ0IsZUFBZTFCLEtBQU0scUJBQ3hDVSxFQUFFRSxpQkFDRnBCLEVBQVNrQixFQUFFZ0IsY0FBZXpHLHVIRjFHN0IiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24oKXtcbiIsImltcG9ydCAkIGZyb20gJ2pxdWVyeSdcblxuLyoqXG4gKlx0U3RvbGVuIGZyb20gaHR0cHM6Ly9naXRodWIuY29tL2RhdmlkZWFybC93ZWJhdXRoblxuICovXG5mdW5jdGlvbiB3ZWJhdXRobkF1dGhlbnRpY2F0ZSggcHViS2V5QXV0aCwgY2IgKSB7XG5cblx0Y29uc3Qgb3JpZ2luYWxDaGFsbGVuZ2UgPSBwdWJLZXlBdXRoLmNoYWxsZW5nZTtcblx0Y29uc3QgcGsgPSBPYmplY3QuYXNzaWduKCB7fSwgcHViS2V5QXV0aCApXG5cblx0cGsuY2hhbGxlbmdlID0gbmV3IFVpbnQ4QXJyYXkoIHB1YktleUF1dGguY2hhbGxlbmdlIClcblx0cGsuYWxsb3dDcmVkZW50aWFscyA9IHBrLmFsbG93Q3JlZGVudGlhbHMubWFwKCBrID0+IHtcblx0XHRsZXQgcmV0ID0gT2JqZWN0LmFzc2lnbigge30sIGsgKVxuXHRcdHJldC5pZCA9IG5ldyBVaW50OEFycmF5KGsuaWQpO1xuXHRcdHJldHVybiByZXRcblx0fSApXG5cblx0LyogYXNrIHRoZSBicm93c2VyIHRvIHByb21wdCB0aGUgdXNlciAqL1xuXHRuYXZpZ2F0b3IuY3JlZGVudGlhbHMuZ2V0KCB7IHB1YmxpY0tleTogcGsgfSApXG5cdFx0LnRoZW4oIGFBc3NlcnRpb24gPT4ge1xuXHRcdFx0Ly8gY29uc29sZS5sb2coXCJDcmVkZW50aWFscy5HZXQgcmVzcG9uc2U6IFwiLCBhQXNzZXJ0aW9uKTtcblx0XHRcdHZhciBpZGEgPSBbXTtcblx0XHRcdChuZXcgVWludDhBcnJheShhQXNzZXJ0aW9uLnJhd0lkKSkuZm9yRWFjaChmdW5jdGlvbih2KXsgaWRhLnB1c2godik7IH0pO1xuXHRcdFx0dmFyIGNkID0gSlNPTi5wYXJzZShTdHJpbmcuZnJvbUNoYXJDb2RlLmFwcGx5KG51bGwsXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0ICBuZXcgVWludDhBcnJheShhQXNzZXJ0aW9uLnJlc3BvbnNlLmNsaWVudERhdGFKU09OKSkpO1xuXHRcdFx0dmFyIGNkYSA9IFtdO1xuXHRcdFx0KG5ldyBVaW50OEFycmF5KGFBc3NlcnRpb24ucmVzcG9uc2UuY2xpZW50RGF0YUpTT04pKS5mb3JFYWNoKGZ1bmN0aW9uKHYpeyBjZGEucHVzaCh2KTsgfSk7XG5cdFx0XHR2YXIgYWQgPSBbXTtcblx0XHRcdChuZXcgVWludDhBcnJheShhQXNzZXJ0aW9uLnJlc3BvbnNlLmF1dGhlbnRpY2F0b3JEYXRhKSkuZm9yRWFjaChmdW5jdGlvbih2KXsgYWQucHVzaCh2KTsgfSk7XG5cdFx0XHR2YXIgc2lnID0gW107XG5cdFx0XHQobmV3IFVpbnQ4QXJyYXkoYUFzc2VydGlvbi5yZXNwb25zZS5zaWduYXR1cmUpKS5mb3JFYWNoKGZ1bmN0aW9uKHYpeyBzaWcucHVzaCh2KTsgfSk7XG5cdFx0XHR2YXIgaW5mbyA9IHtcblx0XHRcdFx0dHlwZTogYUFzc2VydGlvbi50eXBlLFxuXHRcdFx0XHRvcmlnaW5hbENoYWxsZW5nZTogb3JpZ2luYWxDaGFsbGVuZ2UsXG5cdFx0XHRcdHJhd0lkOiBpZGEsXG5cdFx0XHRcdHJlc3BvbnNlOiB7XG5cdFx0XHRcdFx0YXV0aGVudGljYXRvckRhdGE6IGFkLFxuXHRcdFx0XHRcdGNsaWVudERhdGE6IGNkLFxuXHRcdFx0XHRcdGNsaWVudERhdGFKU09OYXJyYXk6IGNkYSxcblx0XHRcdFx0XHRzaWduYXR1cmU6IHNpZ1xuXHRcdFx0XHR9XG5cdFx0XHR9O1xuXHRcdFx0Y2IoIHRydWUsIEpTT04uc3RyaW5naWZ5KCBpbmZvICkgKTtcblx0XHR9KVxuXHRcdC5jYXRjaCggYUVyciA9PiB7XG5cdFx0XHRpZiAoIFwibmFtZVwiIGluIGFFcnIgKSB7XG5cdFx0XHRcdC8vIGNoYW5nZTogZGlzdGlndWlzaCBiZXR3ZWVuIGVycm9yc1xuXHRcdFx0XHRpZiAoIGFFcnIubmFtZSA9PSBcIk5vdEFsbG93ZWRFcnJvclwiICkge1xuXHRcdFx0XHRcdGNiKCBmYWxzZSwgJ25vdC1hbGxvd2VkJyApO1xuXHRcdFx0XHR9IGVsc2UgaWYgKCBhRXJyLm5hbWUgPT0gXCJBYm9ydEVycm9yXCIgfHwgYUVyci5uYW1lID09IFwiTlNfRVJST1JfQUJPUlRcIiApIHtcblx0XHRcdFx0XHRjYiggZmFsc2UsICdhYm9ydCcgKTtcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRjYiggZmFsc2UsIGFFcnIudG9TdHJpbmcoKSApO1xuXHRcdFx0XHR9XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRjYihmYWxzZSwgYUVyci50b1N0cmluZygpKTtcblx0XHRcdH1cblx0XHR9KTtcbn1cblxuLyoqXG4gKlx0U3RvbGVuIGZyb20gaHR0cHM6Ly9naXRodWIuY29tL2RhdmlkZWFybC93ZWJhdXRoblxuICovXG5mdW5jdGlvbiB3ZWJhdXRoblJlZ2lzdGVyKGtleSwgY2FsbGJhY2spe1xuXG5cdGxldCBwdWJsaWNLZXkgPSBPYmplY3QuYXNzaWduKCB7fSwga2V5LnB1YmxpY0tleSApO1xuXG5cdHB1YmxpY0tleS5hdHRlc3RhdGlvbiA9IHVuZGVmaW5lZDtcblx0cHVibGljS2V5LmNoYWxsZW5nZSA9IG5ldyBVaW50OEFycmF5KCBwdWJsaWNLZXkuY2hhbGxlbmdlICk7IC8vIGNvbnZlcnQgdHlwZSBmb3IgdXNlIGJ5IGtleVxuXHRwdWJsaWNLZXkudXNlci5pZCA9IG5ldyBVaW50OEFycmF5KCBwdWJsaWNLZXkudXNlci5pZCApO1xuXG5cdC8vIGNvbnNvbGUubG9nKGtleSk7XG5cdG5hdmlnYXRvci5jcmVkZW50aWFscy5jcmVhdGUoIHsgcHVibGljS2V5IH0gKVxuXHRcdC50aGVuKGZ1bmN0aW9uIChhTmV3Q3JlZGVudGlhbEluZm8pIHtcblx0XHRcdC8vIGNvbnNvbGUubG9nKFwiQ3JlZGVudGlhbHMuQ3JlYXRlIHJlc3BvbnNlOiBcIiwgYU5ld0NyZWRlbnRpYWxJbmZvKTtcblx0XHRcdHZhciBjZCA9IEpTT04ucGFyc2UoU3RyaW5nLmZyb21DaGFyQ29kZS5hcHBseShudWxsLCBuZXcgVWludDhBcnJheShhTmV3Q3JlZGVudGlhbEluZm8ucmVzcG9uc2UuY2xpZW50RGF0YUpTT04pKSk7XG5cdFx0XHRpZiAoIGtleS5iNjRjaGFsbGVuZ2UgIT09IGNkLmNoYWxsZW5nZSApIHtcblx0XHRcdFx0Y2FsbGJhY2soZmFsc2UsICdrZXkgcmV0dXJuZWQgc29tZXRoaW5nIHVuZXhwZWN0ZWQgKDEpJyk7XG5cdFx0XHR9XG5cdFx0XHRpZiAoJ2h0dHBzOi8vJytrZXkucHVibGljS2V5LnJwLm5hbWUgIT0gY2Qub3JpZ2luKSB7XG5cdFx0XHRcdHJldHVybiBjYWxsYmFjayhmYWxzZSwgJ2tleSByZXR1cm5lZCBzb21ldGhpbmcgdW5leHBlY3RlZCAoMiknKTtcblx0XHRcdH1cblx0XHRcdGlmICghICgndHlwZScgaW4gY2QpKSB7XG5cdFx0XHRcdHJldHVybiBjYWxsYmFjayhmYWxzZSwgJ2tleSByZXR1cm5lZCBzb21ldGhpbmcgdW5leHBlY3RlZCAoMyknKTtcblx0XHRcdH1cblx0XHRcdGlmIChjZC50eXBlICE9ICd3ZWJhdXRobi5jcmVhdGUnKSB7XG5cdFx0XHRcdHJldHVybiBjYWxsYmFjayhmYWxzZSwgJ2tleSByZXR1cm5lZCBzb21ldGhpbmcgdW5leHBlY3RlZCAoNCknKTtcblx0XHRcdH1cblxuXHRcdFx0dmFyIGFvID0gW107XG5cdFx0XHQobmV3IFVpbnQ4QXJyYXkoYU5ld0NyZWRlbnRpYWxJbmZvLnJlc3BvbnNlLmF0dGVzdGF0aW9uT2JqZWN0KSkuZm9yRWFjaChmdW5jdGlvbih2KXtcblx0XHRcdFx0YW8ucHVzaCh2KTtcblx0XHRcdH0pO1xuXHRcdFx0dmFyIHJhd0lkID0gW107XG5cdFx0XHQobmV3IFVpbnQ4QXJyYXkoYU5ld0NyZWRlbnRpYWxJbmZvLnJhd0lkKSkuZm9yRWFjaChmdW5jdGlvbih2KXtcblx0XHRcdFx0cmF3SWQucHVzaCh2KTtcblx0XHRcdH0pO1xuXHRcdFx0dmFyIGluZm8gPSB7XG5cdFx0XHRcdHJhd0lkOiByYXdJZCxcblx0XHRcdFx0aWQ6IGFOZXdDcmVkZW50aWFsSW5mby5pZCxcblx0XHRcdFx0dHlwZTogYU5ld0NyZWRlbnRpYWxJbmZvLnR5cGUsXG5cdFx0XHRcdHJlc3BvbnNlOiB7XG5cdFx0XHRcdFx0YXR0ZXN0YXRpb25PYmplY3Q6IGFvLFxuXHRcdFx0XHRcdGNsaWVudERhdGFKU09OOlxuXHRcdFx0XHRcdCAgSlNPTi5wYXJzZShTdHJpbmcuZnJvbUNoYXJDb2RlLmFwcGx5KG51bGwsIG5ldyBVaW50OEFycmF5KGFOZXdDcmVkZW50aWFsSW5mby5yZXNwb25zZS5jbGllbnREYXRhSlNPTikpKVxuXHRcdFx0XHR9XG5cdFx0XHR9O1xuXHRcdFx0Y2FsbGJhY2sodHJ1ZSwgSlNPTi5zdHJpbmdpZnkoaW5mbykpO1xuXHRcdH0pXG5cdFx0LmNhdGNoKGZ1bmN0aW9uIChhRXJyKSB7XG5cdFx0XHRpZiAoXG5cdFx0XHRcdChcIm5hbWVcIiBpbiBhRXJyKSAmJiAoYUVyci5uYW1lID09IFwiQWJvcnRFcnJvclwiIHx8IGFFcnIubmFtZSA9PSBcIk5TX0VSUk9SX0FCT1JUXCIpXG5cdFx0XHRcdHx8IGFFcnIubmFtZSA9PSAnTm90QWxsb3dlZEVycm9yJ1xuXHRcdFx0KSB7XG5cdFx0XHRcdGNhbGxiYWNrKGZhbHNlLCAnYWJvcnQnKTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdGNhbGxiYWNrKGZhbHNlLCBhRXJyLnRvU3RyaW5nKCkpO1xuXHRcdFx0fVxuXHRcdH0pO1xufVxuXG4vKipcbiAqXHRAcGFyYW0gQXJyYXlCdWZmZXIgYXJyYXlCdWZcbiAqXHRAcmV0dXJuIEFycmF5XG4gKi9cbmNvbnN0IGJ1ZmZlcjJBcnJheSA9IGFycmF5QnVmID0+IFsgLi4uIChuZXcgVWludDhBcnJheSggYXJyYXlCdWYgKSkgXTtcblxuY29uc3QgcmVnaXN0ZXIgPSAoIG9wdHMsIGNhbGxiYWNrICkgPT4ge1xuXG5cdGNvbnN0IHsgYWN0aW9uLCBwYXlsb2FkLCBfd3Bub25jZSB9ID0gb3B0cztcblxuXHR3ZWJhdXRoblJlZ2lzdGVyKCBwYXlsb2FkLCAoc3VjY2VzcyxpbmZvKSA9PiB7XG5cdFx0JC5hamF4KHtcblx0XHRcdHVybDogd3AuYWpheC5zZXR0aW5ncy51cmwsXG5cdFx0XHRtZXRob2Q6ICdwb3N0Jyxcblx0XHRcdGRhdGE6IHtcblx0XHRcdFx0YWN0aW9uOiBhY3Rpb24sXG5cdFx0XHRcdHBheWxvYWQ6IGluZm8sXG5cdFx0XHRcdF93cG5vbmNlOiBfd3Bub25jZVxuXHRcdFx0fSxcblx0XHRcdHN1Y2Nlc3M6IGNhbGxiYWNrXG5cdFx0fSlcblx0fSlcbn1cblxuXG5jb25zdCBsb2dpbiA9ICggb3B0cywgY2FsbGJhY2sgKSA9PiB7XG5cblx0Y29uc3QgeyBhY3Rpb24sIHBheWxvYWQsIF93cG5vbmNlIH0gPSBvcHRzO1xuXG5cdHdlYmF1dGhuQXV0aGVudGljYXRlKCBwYXlsb2FkLCAoIHN1Y2Nlc3MsIGluZm8gKSA9PiB7XG5cdFx0Y2FsbGJhY2soIHsgc3VjY2VzcywgcmVzdWx0OiBpbmZvIH0gKVxuXHR9KVxufVxuXG5jb25zdCBzZW5kUmVxdWVzdCA9ICggb3B0cywgY2FsbGJhY2sgKSA9PiB7XG5cblx0Y29uc3QgeyBhY3Rpb24sIHBheWxvYWQsIF93cG5vbmNlIH0gPSBvcHRzO1xuXG5cdCQuYWpheCh7XG5cdFx0dXJsOiB3cC5hamF4LnNldHRpbmdzLnVybCxcblx0XHRtZXRob2Q6ICdwb3N0Jyxcblx0XHRkYXRhOiB7XG5cdFx0XHRhY3Rpb246IGFjdGlvbixcblx0XHRcdHBheWxvYWQ6IHBheWxvYWQsXG5cdFx0XHRfd3Bub25jZTogX3dwbm9uY2Vcblx0XHR9LFxuXHRcdHN1Y2Nlc3M6Y2FsbGJhY2tcblx0fSlcbn1cblxuXG5jb25zdCBlZGl0S2V5ID0gKCBvcHRzLCBjYWxsYmFjayApID0+IHtcblxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHtcblx0cmVnaXN0ZXIsIGxvZ2luLCBzZW5kUmVxdWVzdFxufVxuIiwiaW1wb3J0ICQgZnJvbSAnanF1ZXJ5J1xuaW1wb3J0IHsgcmVnaXN0ZXIsIGxvZ2luLCBzZW5kUmVxdWVzdCB9IGZyb20gJ2RhdmlkZWFybC13ZWJhdXRobidcblxuXG5cbmNvbnN0IGVkaXRLZXkgPSAoIGVkaXRMYWJlbCwgb3B0cyApID0+IHtcblxuXHRjb25zdCB7IGFjdGlvbiwgcGF5bG9hZCwgX3dwbm9uY2UgfSA9IG9wdHNcblxuXG5cdC8vIGNvbnNvbGUubG9nKCRlZGl0TGFiZWwucHJvcCggJ2NvbnRlbnRlZGl0YWJsZScgKSk7XG5cdGNvbnN0IHN0b3BFZGl0aW5nID0gKCBzYXZlID0gZmFsc2UgKSA9PiB7XG5cdFx0bGV0IG5ld0xhYmVsID0gJChlZGl0TGFiZWwpLnRleHQoKVxuXHRcdCQoZWRpdExhYmVsKS5wcm9wKCAnY29udGVudGVkaXRhYmxlJywgZmFsc2UgKTtcblx0XHQkKGRvY3VtZW50KS5vZmYoICdrZXlkb3duJyApXG5cdFx0JChlZGl0TGFiZWwpLm9mZiggJ2JsdXInIClcblx0XHRpZiAoIHNhdmUgJiYgcHJldkxhYmVsICE9PSBuZXdMYWJlbCApIHtcblxuXHRcdFx0JCgnPHNwYW4gY2xhc3M9XCJzcGlubmVyXCI+PC9zcGFuPicpLmluc2VydEFmdGVyKGVkaXRMYWJlbClcblxuXHRcdFx0c2VuZFJlcXVlc3QoXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRhY3Rpb24sXG5cdFx0XHRcdFx0cGF5bG9hZDogeyBtZDVpZDogcGF5bG9hZCwgbGFiZWw6IG5ld0xhYmVsIH0sXG5cdFx0XHRcdFx0X3dwbm9uY2Vcblx0XHRcdFx0fSxcblx0XHRcdFx0cmVzcG9uc2UgPT4ge1xuXHRcdFx0XHRcdCQoZWRpdExhYmVsKS5uZXh0KCcuc3Bpbm5lcicpLnJlbW92ZSgpXG5cdFx0XHRcdH1cblx0XHRcdCk7XG5cdFx0fSBlbHNlIGlmICggISBzYXZlICkge1xuXHRcdFx0JChlZGl0TGFiZWwpLnRleHQocHJldkxhYmVsKVxuXHRcdH1cblx0fVxuXG5cdGNvbnN0IHByZXZMYWJlbCA9ICQoZWRpdExhYmVsKS50ZXh0KClcblxuXHQkKGVkaXRMYWJlbCkucHJvcCggJ2NvbnRlbnRlZGl0YWJsZScsIHRydWUgKTtcblxuXHQkKGRvY3VtZW50KS5vbiggJ2tleWRvd24nLCBlID0+IHtcblx0XHRpZiAoIGUud2hpY2ggPT09IDEzICkge1xuXHRcdFx0c3RvcEVkaXRpbmcoIHRydWUgKVxuXHRcdFx0ZS5wcmV2ZW50RGVmYXVsdCgpXG5cdFx0fSBlbHNlIGlmICggZS53aGljaCA9PT0gMjcgKSB7XG5cdFx0XHRzdG9wRWRpdGluZyggdHJ1ZSApXG5cdFx0fVxuXHR9IClcblxuXHQvLyBmb2N1cyBhbmQgc2VsZWN0XG5cdCQoZWRpdExhYmVsKS5vbiggJ2JsdXInLCBlID0+IHN0b3BFZGl0aW5nKCB0cnVlICkgKVxuXG5cdCQoZWRpdExhYmVsKS5mb2N1cygpXG5cblx0ZG9jdW1lbnQuZXhlY0NvbW1hbmQoICdzZWxlY3RBbGwnLCBmYWxzZSwgbnVsbCApO1xuXG59XG5cbiQoZG9jdW1lbnQpLm9uKCAnY2xpY2snLCAnI3dlYmF1dGhuLXJlZ2lzdGVyLWtleScsIGUgPT4ge1xuXG5cdGUucHJldmVudERlZmF1bHQoKTtcblxuXHRjb25zdCBvcHRzID0gSlNPTi5wYXJzZSggJChlLnRhcmdldCkuYXR0cignZGF0YS1jcmVhdGUtb3B0aW9ucycpICk7XG5cblx0cmVnaXN0ZXIoIG9wdHMsIHJlc3BvbnNlID0+IHtcblxuXHRcdC8vIDJETzogZXJyb3IgaGFuZGxpbmdcblxuXHRcdGxldCAka2V5SXRlbSA9ICQocmVzcG9uc2UuaHRtbCkuYXBwZW5kVG8oJyN3ZWJhdXRobi1rZXlzJylcblx0XHRsZXQgJGtleUxhYmVsID0gJGtleUl0ZW0uZmluZCgnLndlYmF1dGhuLWxhYmVsJylcblxuXHRcdGVkaXRLZXkoXG5cdFx0XHQka2V5TGFiZWwuZ2V0KDApLFxuXHRcdFx0SlNPTi5wYXJzZSggJGtleUxhYmVsLmF0dHIoJ2RhdGEtYWN0aW9uJykgKVxuXHRcdCk7XG5cdH0pO1xuXG59KTtcblxuJChkb2N1bWVudCkub24oJ2NsaWNrJywnLndlYmF1dGhuLWFjdGlvbicsIGUgPT4ge1xuXHRjb25zdCBvcHRzID0gSlNPTi5wYXJzZSggJChlLnRhcmdldCkuYXR0cignZGF0YS1hY3Rpb24nKSApO1xuXHRjb25zdCBidG4gPSBlLnRhcmdldDtcblx0Y29uc3QgJGtleUVsID0gJChlLnRhcmdldCkuY2xvc2VzdCgnLndlYmF1dGhuLWtleScpXG5cdGNvbnN0IHsgYWN0aW9uLCBwYXlsb2FkLCBfd3Bub25jZSB9ID0gb3B0c1xuXG5cdGlmICggb3B0cy5hY3Rpb24gPT09ICd3ZWJhdXRobi10ZXN0LWtleScgKSB7XG5cdFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xuXHRcdGxvZ2luKCBvcHRzLCByZXN1bHQgPT4ge1xuXHRcdFx0Ly8gc2VuZCB0aGF0IGNyYXAgdG8gc2VydmVyXG5cdFx0XHRjb25zb2xlLmxvZyhyZXN1bHQpXG5cdFx0XHRzZW5kUmVxdWVzdCggeyBhY3Rpb24sIHBheWxvYWQ6IHJlc3VsdC5yZXN1bHQsIF93cG5vbmNlIH0sIHJlc3BvbnNlID0+IHtcblx0XHRcdFx0Y29uc29sZS5sb2coIHJlc3BvbnNlIClcblx0XHRcdFx0JChidG4pLmFwcGVuZCgnPHNwYW4gY2xhc3M9XCJkYXNoaWNvbnMgZGFzaGljb25zLXllcy1hbHRcIj48L3NwYW4+Jylcblx0XHRcdH0pXG5cdFx0fSApO1xuXHR9IGVsc2UgaWYgKCBvcHRzLmFjdGlvbiA9PT0gJ3dlYmF1dGhuLWRlbGV0ZS1rZXknICkge1xuXHRcdGUucHJldmVudERlZmF1bHQoKTtcblx0XHRzZW5kUmVxdWVzdCggb3B0cywgZnVuY3Rpb24oIHJlc3BvbnNlICkge1xuXHRcdFx0Ly8gcmVtb3ZlXG5cdFx0XHRpZiAoIHJlc3BvbnNlLnN1Y2Nlc3MgKSB7XG5cblx0XHRcdFx0JChidG4pLmNsb3Nlc3QoJy53ZWJhdXRobi1rZXknKS5yZW1vdmUoKTtcblx0XHRcdH1cblx0XHR9ICk7XG5cdH0gaWYgKCBvcHRzLmFjdGlvbiA9PT0gJ3dlYmF1dGhuLWVkaXQta2V5JyApIHtcblx0XHRpZiAoICd0cnVlJyAhPT0gJChlLmN1cnJlbnRUYXJnZXQpLnByb3AoICdjb250ZW50ZWRpdGFibGUnICkgKSB7XG5cdFx0XHRlLnByZXZlbnREZWZhdWx0KCk7XG5cdFx0XHRlZGl0S2V5KCBlLmN1cnJlbnRUYXJnZXQsIG9wdHMgKTtcblx0XHR9XG5cdH1cbn0pO1xuIl19